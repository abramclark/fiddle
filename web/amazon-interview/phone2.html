<script>
// 1. Given a list of integers, find the count of the pairs that sum to a given
// integer such that each element of the list is only used once:
// [1,3,5,3], 6 => 2

var find_pairs = (l, sum)=>{
  var pairs = 0, unused = {}
  l.forEach(v =>{
    if((sum - v) in unused && unused[sum - v] >= 1){
      pairs += 1
      unused[sum - v] -= 1
      return
    }
    unused[v] = v in unused ? unused[v] + 1 : 1
  })
  return pairs
}

tests = [
  [[], 0, 0],
  [[0], 0, 0],
  [[-10, -30, 50, 100, 20, 0], 20, 2],
  [[20, 20, 20, 20, 20], 40, 2],
]
console.log(tests.map(test => find_pairs(test[0], test[1]) == test[2]).indexOf(false) == -1)
</script>
